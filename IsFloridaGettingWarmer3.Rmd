Is Florida Getting Warmer?
=========================

We continue our analysis of statewide temperatures in Florida.

As before we first get the data into R using two lines of code (code chunk). Code chunks begin with three open quotes, followed by the letter r inside two squirly brackets and end with three open quotes.

Recall L locates the data sheet (FLMonthlyT.txt) on a server. The data is read into R using the read.table function. The first argument to the read.table function is L. The result is a data frame called df.
```{r}
L = 'http://myweb.fsu.edu/jelsner/data/FLMonthlyT.txt'
df = read.table(L, header = TRUE)
```

Last time I asked you to try to make a plot of the temperatures for June, including a trend line. Here's how I did it. First load the plotting package **ggplot2**.
```{r}
library("ggplot2")
```

NOTE: If you get the message: Error in library("ggplot2"): there is no package called 'ggplot2'. You need to install the package **ggplot2**.

In the lower right window click Packages > Install, then type ggplot2.

NOTE: If you get the message: Warning in install.packages :
  cannot open URL 'http://www.revolution-computing.com/cran/bin/macosx/mavericks/contrib/3.2/PACKAGES.gz': HTTP status was '404 Not Found'

Type in the console: chooseCRANmirror() and return. This brings up a list of the CRAN mirror sites (where the packages are located). Select a number then return.

Then click Packages > Install, then type ggplot2.

After the package is installed, run the following code chunk.
```{r}
library("ggplot2")
ggplot(df, aes(x = Year, y = Jun)) +
  geom_point() + ylab("June Temperature (F)") +
  geom_smooth(method = lm)
```

It would be nice to see all the temperatures plotted on one graph by month.

To do this we need to change the data frame (df) from a wide format to a long format. Click on df. It's in a wide format since all the measurement values are temperatures and the measurements are spread across 13 rows.

We need to put all the temperatures into a single measurement column. Then add a new column with the names of the months. The new column is the conditioning variable.

We do this with the gather() function from the **tidyr** package. Install the package. Click Packages > Install, then type tidyr.

With the **tidyr** package installed. Run the following code chunk.
```{r}
library("tidyr")
df_long = gather(df, Month, Temperature, Jan:Dec)
df_long$Month = factor(df_long$Month, 
                       levels = month.abb[1:12])
```

The first argument in the gather() is the data frame name. The next argument is what we want to name our conditioning variable (here Month), then what we want to call our measurement variable (here Temperature). The fourth argument are the names of the columns in the data frame where the measurements are from.

Now we can reuse the code to plot from above with a few minor changes.
```{r}
ggplot(df_long, aes(x = Year, y = Temperature)) +
  geom_point() + ylab("Temperature (F)") +
  geom_smooth(method = lm) +
  facet_wrap(~ Month, nrow = 1)
```

Here the y-axis is Temperature (that is what we called the column of measurement values). The facet_wrap() function creates separate plots for each Month.

Seasonal cycle of temperature and trends over time. Cool no?

Click the Knit HTML button to generate an HTML page that you can post on the web.

